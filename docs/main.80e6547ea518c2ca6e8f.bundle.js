(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{280:function(module,exports,__webpack_require__){__webpack_require__(281),__webpack_require__(354),module.exports=__webpack_require__(355)},355:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(171),req=__webpack_require__(456);(0,_react.configure)(function(){req.keys().forEach(function(filename){return req(filename)})},module)}).call(this,__webpack_require__(61)(module))},456:function(module,exports,__webpack_require__){var map={"./index.stories.js":457};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){var id=map[req];if(!(id+1)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return id}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=456},457:function(module,exports,__webpack_require__){"use strict";(function(module){var _react2=_interopRequireDefault(__webpack_require__(2)),_react3=__webpack_require__(171),_addonKnobs=__webpack_require__(474),_storybookState=(__webpack_require__(482),__webpack_require__(590),__webpack_require__(592)),_DateTimeWidget2=_interopRequireDefault(__webpack_require__(596)),_DateTimeReviewWidget2=_interopRequireDefault(__webpack_require__(602)),_LocationPickerWidget2=_interopRequireDefault(__webpack_require__(706)),_LocationReviewWidget2=_interopRequireDefault(__webpack_require__(748)),_FileUploadWidget2=_interopRequireDefault(__webpack_require__(749)),_FileUploadReviewWidget2=_interopRequireDefault(__webpack_require__(765)),_OfficerDetailsDisplayWidget2=_interopRequireDefault(__webpack_require__(766)),_WitnessDetailsDisplayWidget2=_interopRequireDefault(__webpack_require__(767));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(768);var dateTimeStories=(0,_react3.storiesOf)("Date Time",module);dateTimeStories.addDecorator(_addonKnobs.withKnobs),dateTimeStories.add("Edit",function(){return _react2.default.createElement(_DateTimeWidget2.default,{value:(0,_addonKnobs.text)("Date/Time","2011-11-11 11:11 PM")})}).add("Review",function(){return _react2.default.createElement(_DateTimeReviewWidget2.default,{value:(0,_addonKnobs.text)("Date/Time","2011-11-11 11:11 PM")})});var locationStories=(0,_react3.storiesOf)("Location",module);locationStories.addDecorator(_addonKnobs.withKnobs);var initialLocationJSON=JSON.stringify({address:"800 Guadalupe St, Austin, TX 78701",position:{lat:30.271272,lng:-97.745934}});locationStories.add("Edit",(0,_storybookState.withState)({locationJSON:initialLocationJSON})(function(_ref){var store=_ref.store;return _react2.default.createElement(_LocationPickerWidget2.default,{value:store.state.locationJSON,onChange:function(newLocationJSON){return store.set({locationJSON:newLocationJSON})}})})).add("Review",function(){return _react2.default.createElement(_LocationReviewWidget2.default,{value:(0,_addonKnobs.text)("Location",initialLocationJSON)})},{knobs:{escapeHTML:!1}}),(0,_react3.storiesOf)("File Upload",module).add("Edit",function(){return _react2.default.createElement(_FileUploadWidget2.default,null)}).add("Review",function(){return _react2.default.createElement(_FileUploadReviewWidget2.default,null)}),(0,_react3.storiesOf)("Officer Details",module).add("Display",function(){return _react2.default.createElement(_OfficerDetailsDisplayWidget2.default,null)}),(0,_react3.storiesOf)("Witness Details",module).add("Display",function(){return _react2.default.createElement(_WitnessDetailsDisplayWidget2.default,null)})}).call(this,__webpack_require__(61)(module))},596:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(597);var _react2=_interopRequireDefault(__webpack_require__(2)),_reactFlatpickr2=_interopRequireDefault(__webpack_require__(600));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DateTimeWidget=function(_React$Component){function DateTimeWidget(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DateTimeWidget);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DateTimeWidget.__proto__||Object.getPrototypeOf(DateTimeWidget)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DateTimeWidget,_react2.default.Component),_createClass(DateTimeWidget,[{key:"onChange",value:function(_ref){_ref.dates;var datestring=_ref.datestring;this.props.onChange(datestring)}},{key:"render",value:function(){var _this2=this;return _react2.default.createElement(_reactFlatpickr2.default,{"data-enable-time":!0,value:[this.props.value],onChange:function(dates,datestring){return _this2.onChange({dates:dates,datestring:datestring})}})}}]),DateTimeWidget}();exports.default=DateTimeWidget,DateTimeWidget.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"{ dates, datestring }",type:null}],returns:null}],displayName:"DateTimeWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/DateTimeWidget.js"]={name:"DateTimeWidget",docgenInfo:DateTimeWidget.__docgenInfo,path:"src/DateTimeWidget.js"})},602:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DateTimeWidget;var obj,_react=__webpack_require__(2),_react2=(obj=_react)&&obj.__esModule?obj:{default:obj},_dateFns=__webpack_require__(603);function DateTimeWidget(props){var date=(0,_dateFns.parse)(props.value);return _react2.default.createElement("span",null,(0,_dateFns.format)(date,"MMMM Mo, YYYY - h:mm A"))}DateTimeWidget.__docgenInfo={description:"",methods:[],displayName:"DateTimeWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/DateTimeReviewWidget.js"]={name:"DateTimeWidget",docgenInfo:DateTimeWidget.__docgenInfo,path:"src/DateTimeReviewWidget.js"})},706:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactMapboxGl=__webpack_require__(707),_reactMapboxGl2=_interopRequireDefault(_reactMapboxGl),_reactAutosuggest2=_interopRequireDefault(__webpack_require__(734));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}__webpack_require__(746);var Map=(0,_reactMapboxGl2.default)({accessToken:"pk.eyJ1IjoiY3Jvd2VhdHgiLCJhIjoiY2o1NDFvYmxkMHhkcDMycDF2a3pseDFpZiJ9.UcnizcFDleMpv5Vbv8Rngw"}),SelectLocationMap=function(_Component){function SelectLocationMap(props){_classCallCheck(this,SelectLocationMap);var _this=_possibleConstructorReturn(this,(SelectLocationMap.__proto__||Object.getPrototypeOf(SelectLocationMap)).call(this,props));return _this.onStyleLoad=_this.onStyleLoad.bind(_this),_this}return _inherits(SelectLocationMap,_react.Component),_createClass(SelectLocationMap,[{key:"onStyleLoad",value:function(map){map.resize()}},{key:"render",value:function(){var _props=this.props,lat=_props.lat,lng=_props.lng;return _react2.default.createElement(Map,{style:"mapbox://styles/croweatx/cjow5d6cd3l7g2snrvf17wf0r",center:[lng,lat],onStyleLoad:this.onStyleLoad},_react2.default.createElement(_reactMapboxGl.Layer,{type:"symbol",id:"selectedLocation",layout:{"icon-image":"marker-open-small","icon-allow-overlap":!0}},_react2.default.createElement(_reactMapboxGl.Feature,{coordinates:[lng,lat],draggable:!0,onDragEnd:this.props.locationUpdated})))}}]),SelectLocationMap}(),getSuggestionValue=function(suggestion){return suggestion.name},renderSuggestion=function(suggestion){return _react2.default.createElement("div",null,suggestion.name)},LocationPickerWidget=function(_React$Component){function LocationPickerWidget(props){_classCallCheck(this,LocationPickerWidget);var _this2=_possibleConstructorReturn(this,(LocationPickerWidget.__proto__||Object.getPrototypeOf(LocationPickerWidget)).call(this,props));return _this2.state={suggestions:[]},_this2.locationUpdated=_this2.locationUpdated.bind(_this2),_this2.onChange=_this2.onChange.bind(_this2),_this2.onSuggestionsFetchRequested=_this2.onSuggestionsFetchRequested.bind(_this2),_this2.onSuggestionsClearRequested=_this2.onSuggestionsClearRequested.bind(_this2),_this2.onSuggestionSelected=_this2.onSuggestionSelected.bind(_this2),_this2.getCurrentPosition=_this2.getCurrentPosition.bind(_this2),_this2}return _inherits(LocationPickerWidget,_react2.default.Component),_createClass(LocationPickerWidget,[{key:"locationUpdated",value:function(_ref){var _this3=this,lngLat=_ref.lngLat,address="Dropped Pin";fetch("\n      https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox="+lngLat.lat+"%2C"+lngLat.lng+"%2C250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=NwvYKNdIJp8nYo74bUTU&app_code=VHZxGy1nmghs2BCbo0cVCQ").then(function(response){if(200===response.status)response.json().then(function(data){var location={address:address=data.Response.View[0].Result[0].Location.Address.Label,position:lngLat},valueJSON=JSON.stringify(location);_this3.props.onChange(valueJSON)});else{console.log("Looks like there was a problem. Status Code: "+response.status);var location={address:address,position:lngLat},valueJSON=JSON.stringify(location);_this3.props.onChange(valueJSON)}})}},{key:"onChange",value:function(event,_ref2){var newValue=_ref2.newValue,valueJSON=this.props.value?this.props.value:this.props.schema.formData,newLocation={address:newValue,position:JSON.parse(valueJSON).position},newValueJSON=JSON.stringify(newLocation);this.props.onChange(newValueJSON)}},{key:"onSuggestionSelected",value:function(event,_ref3){var suggestion=_ref3.suggestion,suggestionValue=_ref3.suggestionValue;_ref3.suggestionIndex,_ref3.sectionIndex,_ref3.method;if(suggestion.location){var location={address:suggestionValue,position:{lng:suggestion.location[1],lat:suggestion.location[0]}},valueJSON=JSON.stringify(location);this.props.onChange(valueJSON)}this.autosuggestInput.blur()}},{key:"onSuggestionsFetchRequested",value:function(_ref4){var _this4=this,value=_ref4.value;if(value.length>2){var valueJSON=this.props.value?this.props.value:this.props.schema.formData,location=JSON.parse(valueJSON);fetch("https://places.api.here.com/places/v1/autosuggest?at="+location.position.lat+","+location.position.lng+"&q="+value+"&app_id=NwvYKNdIJp8nYo74bUTU&app_code=VHZxGy1nmghs2BCbo0cVCQ").then(function(response){if(200!==response.status)return console.log("Looks like there was a problem. Status Code: "+response.status),void _this4.setState({suggestions:[]});response.json().then(function(data){var suggestions=data.results.filter(function(result){return result.position&&result.vicinity}).map(function(result){return{name:result.title,location:result.position,humanAddress:result.vicinity.replace(/<br\/>/g,", ")}});_this4.setState({suggestions:suggestions})})}).catch(function(err){console.log("Fetch Error :-S",err),_this4.setState({suggestions:[]})})}else this.setState({suggestions:[]})}},{key:"onSuggestionsClearRequested",value:function(){this.setState({suggestions:[],value:""})}},{key:"getCurrentPosition",value:function(){var _this5=this;window.navigator.geolocation.getCurrentPosition(function(position){var lngLat={lat:position.coords.latitude,lng:position.coords.longitude};_this5.locationUpdated({lngLat:lngLat})},function(error){},{enableHighAccuracy:!0})}},{key:"render",value:function(){var _this6=this,valueJSON=this.props.value?this.props.value:this.props.schema.formData,location=JSON.parse(valueJSON),inputProps={value:location.address,onChange:this.onChange};return _react2.default.createElement("div",null,_react2.default.createElement("div",null,_react2.default.createElement(_reactAutosuggest2.default,{ref:function(autosuggest){null!==autosuggest&&(_this6.autosuggestInput=autosuggest.input)},suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:getSuggestionValue,renderSuggestion:renderSuggestion,inputProps:inputProps}),_react2.default.createElement("div",{onClick:this.getCurrentPosition},"GET LOCATION")),_react2.default.createElement(SelectLocationMap,{lat:location.position.lat,lng:location.position.lng,locationUpdated:this.locationUpdated}))}}]),LocationPickerWidget}();exports.default=LocationPickerWidget,LocationPickerWidget.__docgenInfo={description:"",methods:[{name:"locationUpdated",docblock:null,modifiers:[],params:[{name:"{ lngLat }",type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",type:null},{name:"{ newValue }",type:null}],returns:null},{name:"onSuggestionSelected",docblock:null,modifiers:[],params:[{name:"event",type:null},{name:"{ suggestion, suggestionValue, suggestionIndex, sectionIndex, method }",type:null}],returns:null},{name:"onSuggestionsFetchRequested",docblock:null,modifiers:[],params:[{name:"{ value }",type:null}],returns:null},{name:"onSuggestionsClearRequested",docblock:null,modifiers:[],params:[],returns:null},{name:"getCurrentPosition",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LocationPickerWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/LocationPickerWidget.js"]={name:"LocationPickerWidget",docgenInfo:LocationPickerWidget.__docgenInfo,path:"src/LocationPickerWidget.js"})},746:function(module,exports,__webpack_require__){var content=__webpack_require__(747);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(72)(content,options);content.locals&&(module.exports=content.locals)},747:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(71)(!1)).push([module.i,".mapboxgl-map {\n  min-height: 300px;\n}\n",""])},748:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=LocationReviewWidget;var _react2=_interopRequireDefault(__webpack_require__(2));_interopRequireDefault(__webpack_require__(157));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LocationReviewWidget(props){var valueJSON=props.value?props.value:props.schema.formData,location=JSON.parse(valueJSON);return _react2.default.createElement("div",null,_react2.default.createElement("img",{src:"//maps.googleapis.com/maps/api/staticmap?markers="+location.position.lat+","+location.position.lng+"&zoom=15&size=680x400&scale=1&maptype=roadmap&key=AIzaSyBqtg0ntvqWGSHOznB4kq3DiYSyyVNKzIs&style=feature:landscape%7Celement:geometry.fill%7Ccolor:0xf0eef0&style=feature:landscape.man_made%7Celement:geometry.fill%7Ccolor:0xf0eef0&style=feature:poi%7Celement:labels.text%7Cvisibility:off&style=feature:poi.business%7Cvisibility:off&style=feature:road%7Celement:labels.icon%7Cvisibility:off&style=feature:road.arterial%7Celement:geometry.fill%7Ccolor:0x7f7189&style=feature:road.arterial%7Celement:geometry.stroke%7Ccolor:0x7f7189&style=feature:road.arterial%7Celement:labels.icon%7Ccolor:0x3e3b6c&style=feature:road.arterial%7Celement:labels.text.fill%7Ccolor:0x5e494a&style=feature:road.arterial%7Celement:labels.text.stroke%7Ccolor:0xffffff&style=feature:road.highway%7Celement:geometry.fill%7Ccolor:0xe89f9a&style=feature:road.highway%7Celement:geometry.stroke%7Ccolor:0xd6613c&style=feature:road.highway%7Celement:labels.text.fill%7Ccolor:0x190f2c&style=feature:road.highway%7Celement:labels.text.stroke%7Ccolor:0xf6f2fd&style=feature:road.local%7Celement:geometry.fill%7Ccolor:0xb8b1bd&style=feature:road.local%7Celement:geometry.stroke%7Ccolor:0xb8b1bd&style=feature:road.local%7Celement:labels.text%7Ccolor:0xffffff&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x5e494a&style=feature:road.local%7Celement:labels.text.stroke%7Ccolor:0xffffff&style=feature:transit%7Cvisibility:off"}),_react2.default.createElement("div",null,location.address))}LocationReviewWidget.__docgenInfo={description:"",methods:[],displayName:"LocationReviewWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/LocationReviewWidget.js"]={name:"LocationReviewWidget",docgenInfo:LocationReviewWidget.__docgenInfo,path:"src/LocationReviewWidget.js"})},749:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(__webpack_require__(2)),_reactQueryParams2=_interopRequireDefault(__webpack_require__(750)),_reactFilepond=__webpack_require__(757),_filepondPluginImageExifOrientation2=_interopRequireDefault(__webpack_require__(759)),_filepondPluginImagePreview2=_interopRequireDefault(__webpack_require__(760));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}__webpack_require__(761),__webpack_require__(763),(0,_reactFilepond.registerPlugin)(_filepondPluginImageExifOrientation2.default,_filepondPluginImagePreview2.default);var FileUpload=function(_ReactQueryParams){function FileUpload(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FileUpload);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FileUpload.__proto__||Object.getPrototypeOf(FileUpload)).call(this,props));return _this.state={caseNumber:localStorage.getItem("caseNumber")||"",files:[],fileList:[]},_this.fileList=[],_this.defaultQueryParams={case:"n/a"},_this.filesUpdated=_this.filesUpdated.bind(_this),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FileUpload,_reactQueryParams2.default),_createClass(FileUpload,[{key:"handleInit",value:function(){console.log("FilePond instance has initialised",this.pond)}},{key:"handleProcessing",value:function(fieldName,file,metadata,load,error,progress,_abort){console.log("Whoa! We are actually running a custom thing");var formData=new FormData,fileSignature=this.getFileSignatureFromList(file),fields=[];null==fileSignature&&(console.log(file),console.log("The file signature for file could not be located.")),console.log(fileSignature);try{fields=Object.keys(fileSignature.fields),console.log("handleUpload() Object keys loaded")}catch(error){fields=[],console.log("Yikes, no good")}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;console.log(key+" = "+fileSignature.fields[key]),formData.append(key,fileSignature.fields[key])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}console.log("fieldName:"+fieldName),console.log("file:"+file),console.log("key:"+fileSignature.fields.key),formData.append("file",file,fileSignature.fields.key);var request=new XMLHttpRequest;return request.open("POST",fileSignature.url),request.upload.onprogress=function(e){progress(e.lengthComputable,e.loaded,e.total)},request.onload=function(){request.status>=200&&request.status<300?load(request.responseText):error("oh no")},request.send(formData),{abort:function(){request.abort(),_abort()}}}},{key:"withQuery",value:function(url,params){var query=Object.keys(params).filter(function(k){return void 0!==params[k]}).map(function(k){return encodeURIComponent(k)+"="+encodeURIComponent(params[k])}).join("&");return url+=(-1===url.indexOf("?")?"?":"&")+query}},{key:"parseSignatureResponse",value:function(res){console.log("parseSignatureResponse: "),console.log(res.filename),console.log(res.creds.fields||"Invalid response"),this.fileList.push(res);var value=!!this.fileList.length&&JSON.stringify(this.fileList.map(function(f){return""+f.creds.fields.key}));this.props.onChange(value),console.log("WE HAVE FILES UPDATED:"),console.log(this.props.value),console.log(this.fileList),this.setState({fileList:[].concat(_toConsumableArray(this.fileList))})}},{key:"retrieveFileSignature",value:function(key,caseNum){var _this2=this;console.log("retrieveFileSignature: "+key+", "+caseNum);var formData=new FormData;formData.append("key",key),formData.append("case",caseNum),fetch(this.withQuery("http://127.0.0.1:5000/uploads/request-signature",{file:key,case:caseNum.toLowerCase()})).then(function(res){return res.json()}).catch(function(error){return console.error("Error:",error)}).then(function(res){_this2.parseSignatureResponse(res)})}},{key:"handleFileAdded",value:function(error,file){console.log("handleFileAdded() Errors: "),console.log(error),console.log("handleFileAdded() File just added: "+file.filename),console.log("handleFileAdded() File Object: "),console.log(file),this.retrieveFileSignature(file.filename,this.state.caseNumber)}},{key:"handleRemoveFile",value:function(file){for(var i in this.fileList){this.fileList[i].filename===file.filename&&(console.log("Removing: "+file.filename+" at index: "+i),this.fileList.splice(i,1),this.setState({fileList:[].concat(_toConsumableArray(this.fileList))}))}console.log(this.state.fileList)}},{key:"getFileSignatureFromList",value:function(file){var uploadedFileName=file.name||"";for(var i in console.log("getFileSignatureFromList() We are looking for: "+uploadedFileName),this.fileList){if(this.fileList[i].filename===uploadedFileName)return console.log("getFileSignatureFromList() Item found at index: "+i),this.fileList[i].creds}return null}},{key:"filesUpdated",value:function(_ref){var fileItems=_ref.fileItems;this.setState({files:fileItems.map(function(fileItem){return fileItem.file})})}},{key:"render",value:function(){var _this3=this;return _react2.default.createElement("div",null,_react2.default.createElement("header",null,_react2.default.createElement("div",null,"Case Number:"),_react2.default.createElement("div",null,this.state.caseNumber),_react2.default.createElement(_reactFilepond.FilePond,{ref:function(_ref2){return _this3.pond=_ref2},allowMultiple:!0,maxFiles:3,server:{process:this.handleProcessing.bind(this)},oninit:function(){return _this3.handleInit()},onaddfile:function(error,file){return _this3.handleFileAdded(error,file)},onremovefile:function(file){return _this3.handleRemoveFile(file)},onupdatefiles:function(fileItems){return _this3.filesUpdated({fileItems:fileItems})}},this.state.files.map(function(file){return _react2.default.createElement(_reactFilepond.File,{key:file,src:file,origin:"local"})}))))}}]),FileUpload}();exports.default=FileUpload,FileUpload.__docgenInfo={description:"",methods:[{name:"handleInit",docblock:null,modifiers:[],params:[],returns:null},{name:"handleProcessing",docblock:null,modifiers:[],params:[{name:"fieldName",type:null},{name:"file",type:null},{name:"metadata",type:null},{name:"load",type:null},{name:"error",type:null},{name:"progress",type:null},{name:"abort",type:null}],returns:null},{name:"withQuery",docblock:null,modifiers:[],params:[{name:"url",type:null},{name:"params",type:null}],returns:null},{name:"parseSignatureResponse",docblock:null,modifiers:[],params:[{name:"res",type:null}],returns:null},{name:"retrieveFileSignature",docblock:null,modifiers:[],params:[{name:"key",type:null},{name:"caseNum",type:null}],returns:null},{name:"handleFileAdded",docblock:null,modifiers:[],params:[{name:"error",type:null},{name:"file",type:null}],returns:null},{name:"handleRemoveFile",docblock:null,modifiers:[],params:[{name:"file",type:null}],returns:null},{name:"getFileSignatureFromList",docblock:null,modifiers:[],params:[{name:"file",type:null}],returns:null},{name:"filesUpdated",docblock:null,modifiers:[],params:[{name:"{ fileItems }",type:null}],returns:null}],displayName:"FileUpload"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/FileUploadWidget.js"]={name:"FileUpload",docgenInfo:FileUpload.__docgenInfo,path:"src/FileUploadWidget.js"})},765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=FileUploadReviewWidget;var obj,_react=__webpack_require__(2),_react2=(obj=_react)&&obj.__esModule?obj:{default:obj};function FileUploadReviewWidget(props){if(!props.value)return null;var files=JSON.parse(props.value);return _react2.default.createElement("ul",null,files.map(function(f){return _react2.default.createElement("li",{key:f},f)}))}FileUploadReviewWidget.__docgenInfo={description:"",methods:[],displayName:"FileUploadReviewWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/FileUploadReviewWidget.js"]={name:"FileUploadReviewWidget",docgenInfo:FileUploadReviewWidget.__docgenInfo,path:"src/FileUploadReviewWidget.js"})},766:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=OfficerDetailsDisplayWidget;var _react2=_interopRequireDefault(__webpack_require__(2));_interopRequireDefault(__webpack_require__(157));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function OfficerDetailsDisplayWidget(props){return _react2.default.createElement("div",null,"Placeholder Officer Details")}OfficerDetailsDisplayWidget.__docgenInfo={description:"",methods:[],displayName:"OfficerDetailsDisplayWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OfficerDetailsDisplayWidget.js"]={name:"OfficerDetailsDisplayWidget",docgenInfo:OfficerDetailsDisplayWidget.__docgenInfo,path:"src/OfficerDetailsDisplayWidget.js"})},767:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=WitnessDetailsDisplayWidget;var _react2=_interopRequireDefault(__webpack_require__(2));_interopRequireDefault(__webpack_require__(157));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function WitnessDetailsDisplayWidget(props){return _react2.default.createElement("div",null,"Placeholder Witness Details")}WitnessDetailsDisplayWidget.__docgenInfo={description:"",methods:[],displayName:"WitnessDetailsDisplayWidget"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/WitnessDetailsDisplayWidget.js"]={name:"WitnessDetailsDisplayWidget",docgenInfo:WitnessDetailsDisplayWidget.__docgenInfo,path:"src/WitnessDetailsDisplayWidget.js"})}},[[280,1,2]]]);
//# sourceMappingURL=main.80e6547ea518c2ca6e8f.bundle.js.map